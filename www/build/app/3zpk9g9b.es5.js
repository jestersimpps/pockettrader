/*! Built with http://stenciljs.com */
App.loadBundle("3zpk9g9b",["exports","./chunk-e1ba905f.js","./chunk-eba26761.js","./chunk-cd16bb21.js","./chunk-d9dbd310.js"],function(t,e,n,i,o){var r,l=window.App.h;!function(t){t.limitbuy="limitbuy",t.limitsell="limitsell",t.marketbuy="marketbuy",t.marketsell="marketsell"}(r||(r={}));var a=function(){function t(){this.pairs=[],this.isLoading=!1,this.tradePrice=0,this.tradeAmount=0,this.tradeAction=r.limitbuy,this.baseBalance=0,this.quoteBalance=0}return t.prototype.componentWillLoad=function(){this.store.mapStateToProps(this,function(t){var e=t.app;return{exchanges:e.exchanges,baseCurrency:e.baseCurrency,currencies:e.currencies,tickers:e.tickers,wallets:e.wallets}}),this.tickers.length&&(this.pairs=this.tickers[0].tickers.sort(function(t,e){var n=t.symbol.toUpperCase(),i=e.symbol.toUpperCase();return n<i?-1:n>i?1:0}),this.exchangeId=this.tickers[0].exchangeId,this.getNewTicker(this.exchangeId,this.pairs[0].symbol))},t.prototype.exchangeSelected=function(t){this.exchangeId=t.target.value,this.pairs=this.tickers.find(function(e){return e.exchangeId===t.target.value}).tickers.sort(function(t,e){var n=t.symbol.toUpperCase(),i=e.symbol.toUpperCase();return n<i?-1:n>i?1:0}),this.getNewTicker(this.exchangeId,this.pairs[0].symbol)},t.prototype.pairSelected=function(t){this.getNewTicker(this.exchangeId,t.target.value)},t.prototype.getBalances=function(t,e){var n=this,i=this.exchanges.find(function(t){return t.id===n.exchangeId}),o=i.balances.find(function(e){return e.symbol===t}),r=i.balances.find(function(t){return t.symbol===e});this.quoteBalance=0,this.baseBalance=0,o&&(this.quoteBalance=o.available),r&&(this.baseBalance=r.available)},t.prototype.setPriceWithButtons=function(t){var e=this.tradePrice/100,n=this.tradePrice/1e3;switch(t){case"--":this.tradePrice-=e;break;case"-":this.tradePrice-=n;break;case"+":this.tradePrice+=n;break;case"++":this.tradePrice+=e}},t.prototype.getFormat=function(){for(var t=[],e=0;e<this.ticker.info.precision.amount;e++)t.push("0");return"0,0."+t.join("")},t.prototype.getNewTicker=function(t,n){var i=this;this.isLoading=!0,e.TICKERSERVICE.getTicker(t,n).then(function(t){i.ticker=t.data,i.tradePrice=+t.data.last,i.getBalances(t.data.quote,t.data.base),i.isLoading=!1})},t.prototype.setTradePrice=function(t){this.tradePrice=+t.target.value},t.prototype.setTradeAmount=function(t){this.tradeAmount=+t.target.value},t.prototype.setTradeAmountByButton=function(t){switch(this.tradeAction){case r.limitbuy:case r.marketbuy:this.tradeAmount=(this.quoteBalance*t-this.quoteBalance*t*this.ticker.info.taker)/this.tradePrice;break;case r.limitsell:case r.marketsell:this.tradeAmount=this.baseBalance*t-this.baseBalance*t*this.ticker.info.taker}},t.prototype.render=function(){var t=this;return[l("ion-header",null,l("ion-toolbar",{color:"dark"},l("ion-buttons",{slot:"start"},l("ion-button",{fill:"solid",shape:"round",color:"danger",href:"/panic",padding:!0},l("ion-icon",{name:"alert"}),"Panic")),l("ion-title",{"text-center":!0},"Trade"))),l("ion-content",null,l("ion-list",null,l("ion-list-header",{color:"dark"},"Pair",this.ticker?l("ion-badge",{color:"light","margin-right":!0},this.exchangeId," - ",this.ticker.symbol):l("ion-icon",{name:"sync",class:"spin",slot:"end","margin-right":!0})),l("ion-item",{lines:"none"},l("ion-label",null,"Select Exchange"),l("select",{onChange:function(e){return t.exchangeSelected(e)}},this.exchanges.filter(function(t){return t.key&&t.secret}).map(function(t){return l("option",{value:t.id},t.id)}))),l("ion-item",{lines:"none"},l("ion-label",null,"Select Pair"),l("select",{onChange:function(e){return t.pairSelected(e)}},this.pairs.map(function(t){return l("option",{value:t.symbol},t.symbol)}))),l("ion-list-header",{color:"dark"},"Price",this.isLoading?l("ion-icon",{name:"sync",class:"spin",slot:"end","margin-right":!0}):l("ion-badge",{color:"light","margin-right":!0},n.numeral(+this.tradePrice).format("0,0.00000000")," ",this.ticker.quote)),this.ticker&&l("div",null,l("ion-item",{lines:"none"},l("ion-label",null,"Last price"),l("ion-button",{color:"light",slot:"end","text-right":!0,onClick:function(){return t.tradePrice=t.ticker.last}},n.numeral(+this.ticker.last).format("0,0.00000000"))),l("ion-item",{lines:"none"},l("ion-label",null,"Set price"),l("ion-input",{name:"price",type:"number",value:""+this.tradePrice,onBlur:function(e){return t.setTradePrice(e)}})),l("ion-grid",null,l("ion-row",null,l("ion-col",null,l("ion-button",{expand:"block",color:"light",onClick:function(){return t.setPriceWithButtons("--")}},"- -")),l("ion-col",null,l("ion-button",{expand:"block",color:"light",onClick:function(){return t.setPriceWithButtons("-")}},"-")),l("ion-col",null,l("ion-button",{expand:"block",color:"light",onClick:function(){return t.setPriceWithButtons("+")}},"+")),l("ion-col",null,l("ion-button",{expand:"block",color:"light",onClick:function(){return t.setPriceWithButtons("++")}},"+ +")))),l("ion-list-header",{color:"dark"},"Action",l("ion-badge",{color:"light","margin-right":!0},this.tradeAction)),l("ion-grid",null,l("ion-row",null,l("ion-col",null,l("ion-button",{expand:"block",color:"light",onClick:function(){return t.tradeAction=r.marketbuy}},"Market Buy")),l("ion-col",null,l("ion-button",{expand:"block",color:"light",onClick:function(){return t.tradeAction=r.marketsell}},"Market Sell"))),l("ion-row",null,l("ion-col",null,l("ion-button",{expand:"block",color:"light",onClick:function(){return t.tradeAction=r.limitbuy}},"Limit Buy")),l("ion-col",null,l("ion-button",{expand:"block",color:"light",onClick:function(){return t.tradeAction=r.limitsell}},"Limit Sell")))),l("ion-list-header",{color:"dark"},"Amount",this.isLoading?l("ion-icon",{name:"sync",class:"spin",slot:"end","margin-right":!0}):l("ion-badge",{color:"light","margin-right":!0},n.numeral(this.tradeAmount).format(this.getFormat())," ",(this.tradeAction===r.limitbuy||this.tradeAction===r.marketbuy)&&this.ticker.base,(this.tradeAction===r.limitsell||this.tradeAction===r.marketsell)&&this.ticker.quote)),l("ion-item",{lines:"none"},l("ion-label",null,"Available ",this.ticker.quote),l("ion-button",{color:"light",slot:"end","text-right":!0,onClick:function(){return t.tradeAmount=t.quoteBalance/t.tradePrice}},n.numeral(+this.quoteBalance).format("0,0.00000000"))),l("ion-item",{lines:"none"},l("ion-label",null,"Available ",this.ticker.base),l("ion-button",{color:"light",slot:"end","text-right":!0,onClick:function(){return t.tradeAmount=t.baseBalance}},n.numeral(+this.baseBalance).format("0,0.00000000"))),l("ion-item",{lines:"none"},l("ion-label",null,"Set Amount"),l("ion-input",{name:"price",type:"number",value:""+this.tradeAmount,onBlur:function(e){return t.setTradeAmount(e)}})),l("ion-grid",null,l("ion-row",null,l("ion-col",null,l("ion-button",{expand:"block",color:"light",onClick:function(){return t.setTradeAmountByButton(.1)}},"10%")),l("ion-col",null,l("ion-button",{expand:"block",color:"light",onClick:function(){return t.setTradeAmountByButton(.2)}},"20%")),l("ion-col",null,l("ion-button",{expand:"block",color:"light",onClick:function(){return t.setTradeAmountByButton(.3)}},"30%")),l("ion-col",null,l("ion-button",{expand:"block",color:"light",onClick:function(){return t.setTradeAmountByButton(.4)}},"40%")),l("ion-col",null,l("ion-button",{expand:"block",color:"light",onClick:function(){return t.setTradeAmountByButton(.5)}},"50%")),l("ion-col",null,l("ion-button",{expand:"block",color:"light",onClick:function(){return t.setTradeAmountByButton(.6)}},"60%")),l("ion-col",null,l("ion-button",{expand:"block",color:"light",onClick:function(){return t.setTradeAmountByButton(.7)}},"70%")),l("ion-col",null,l("ion-button",{expand:"block",color:"light",onClick:function(){return t.setTradeAmountByButton(.8)}},"80%")),l("ion-col",null,l("ion-button",{expand:"block",color:"light",onClick:function(){return t.setTradeAmountByButton(.9)}},"90%")),l("ion-col",null,l("ion-button",{expand:"block",color:"light",onClick:function(){return t.setTradeAmountByButton(1)}},"100%")))),l("ion-list-header",{color:"dark"},"Summary"),l("ion-item",{lines:"none"},l("ion-label",null,"Action"),l("ion-label",{slot:"end","text-right":!0},this.tradeAction)),l("ion-item",{lines:"none"},l("ion-label",null,"Amount"),l("ion-label",{slot:"end","text-right":!0},n.numeral(this.tradeAmount).format(this.getFormat())," ",this.ticker.base)),l("ion-item",{lines:"none"},l("ion-label",null,"Price"),l("ion-label",{slot:"end","text-right":!0},n.numeral(+this.tradePrice).format("0,0.00000000")," ",this.ticker.symbol)),l("ion-item",{lines:"none"},l("ion-label",null,"Fee"),l("ion-label",{slot:"end","text-right":!0},n.numeral(+this.ticker.info.taker*+this.tradeAmount*+this.tradePrice).format("0,0.00000000")," ",this.ticker.quote)),l("ion-item",{lines:"none"},l("ion-label",null,"Total"),l("ion-label",{slot:"end","text-right":!0},n.numeral(+this.tradeAmount*+this.tradePrice-+this.ticker.info.taker*+this.tradeAmount*+this.tradePrice).format("0,0.00000000")," ",this.ticker.quote)),l("ion-button",{expand:"block",color:"success",onClick:function(){return t.executeOrder(t.ticker.symbol,t.tradeAction,t.tradePrice,t.tradeAmount)}},"Execute"))))]},t.prototype.executeOrder=function(t,e,n,i){console.log(t,e,n,i)},Object.defineProperty(t,"is",{get:function(){return"app-trade"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"properties",{get:function(){return{baseBalance:{state:!0},exchangeId:{state:!0},exchanges:{state:!0},isLoading:{state:!0},pairs:{state:!0},quoteBalance:{state:!0},store:{context:"store"},ticker:{state:!0},tickers:{state:!0},tradeAction:{state:!0},tradeAmount:{state:!0},tradePrice:{state:!0}}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"style",{get:function(){return".full{width:100%}"},enumerable:!0,configurable:!0}),t}();t.AppTrade=a,Object.defineProperty(t,"__esModule",{value:!0})});