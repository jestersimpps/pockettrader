/*! Built with http://stenciljs.com */
const{h:t}=window.App;class l{constructor(){this.isScrolling=!1,this.lastScroll=0,this.queued=!1,this.scrollEvents=!1,this.detail={positions:[],scrollTop:0,scrollLeft:0,type:"scroll",event:void 0,startX:0,startY:0,startTimeStamp:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,timeStamp:0,data:void 0,isScrolling:!0}}componentWillLoad(){void 0===this.forceOverscroll&&(this.forceOverscroll="ios"===this.mode&&"ontouchstart"in this.win)}componentDidUnload(){this.watchDog&&clearInterval(this.watchDog)}onScroll(t){const l=Date.now(),o=!this.isScrolling;this.lastScroll=l,o&&this.onScrollStart(),!this.queued&&this.scrollEvents&&(this.queued=!0,this.queue.read(l=>{this.queued=!1,this.detail.event=t,function(t,l,o,e){const s=l.scrollTop,r=l.scrollLeft,i=t.positions;e&&(t.startTimeStamp=o,t.startY=s,t.startX=r,i.length=0),t.timeStamp=o,t.currentY=t.scrollTop=s,t.currentX=t.scrollLeft=r,t.deltaY=s-t.startY,t.deltaX=r-t.startX,i.push(s,r,o);const c=o-100;let n=i.length-1;for(;n>0&&i[n]>c;)n-=3;if(n>3){const l=1/(i[n]-o),e=i[n-1]-r,c=i[n-2]-s;t.velocityX=e*l,t.velocityY=c*l}else t.velocityX=0,t.velocityY=0}(this.detail,this.el,l,o),this.ionScroll.emit(this.detail)}))}scrollToTop(t){return this.scrollToPoint(0,0,t)}scrollToBottom(t){const l=this.el?this.el.scrollHeight-this.el.clientHeight:0;return this.scrollToPoint(0,l,t)}scrollByPoint(t,l,o,e){return this.scrollToPoint(t+this.el.scrollLeft,l+this.el.scrollTop,o,e)}scrollToPoint(t,l,o,e){let s;const r=new Promise(t=>{s=t}).then(()=>e&&e()),i=this,c=i.el;if(!c)return s(),r;if(o<32)return c.scrollTop=l,c.scrollLeft=t,s(),r;const n=c.scrollTop,a=c.scrollLeft,h=o/16+100;let u,d=0,m=!1;function S(e){if(d++,!i.el||m||d>h)return i.isScrolling=!1,c.style.transform=c.style.webkitTransform="",void s();let r=Math.min(1,(e-u)/o);const p=--r*r*r+1;n!==l&&(c.scrollTop=p*(l-n)+n),a!==t&&(c.scrollLeft=Math.floor(p*(t-a)+a)),p<1?i.queue.read(S):(m=!0,i.isScrolling=!1,c.style.transform=c.style.webkitTransform="",s())}return i.isScrolling=!0,this.queue.write(()=>{this.queue.write(t=>{u=t,S(t)})}),r}onScrollStart(){this.isScrolling=!0,this.ionScrollStart.emit({isScrolling:!0}),this.watchDog&&clearInterval(this.watchDog),this.watchDog=setInterval(()=>{this.lastScroll<Date.now()-120&&this.onScrollEnd()},100)}onScrollEnd(){clearInterval(this.watchDog),this.watchDog=null,this.isScrolling=!1,this.ionScrollEnd.emit({isScrolling:!1})}hostData(){return{class:{overscroll:this.forceOverscroll}}}render(){return[t("div",{class:"scroll-inner"},t("slot",null))]}static get is(){return"ion-scroll"}static get host(){return{theme:"scroll"}}static get properties(){return{config:{context:"config"},el:{elementRef:!0},forceOverscroll:{type:Boolean,attr:"force-overscroll",mutable:!0},mode:{type:String,attr:"mode"},queue:{context:"queue"},scrollByPoint:{method:!0},scrollEvents:{type:Boolean,attr:"scroll-events"},scrollToBottom:{method:!0},scrollToPoint:{method:!0},scrollToTop:{method:!0},win:{context:"window"}}}static get events(){return[{name:"ionScrollStart",method:"ionScrollStart",bubbles:!0,cancelable:!0,composed:!0},{name:"ionScroll",method:"ionScroll",bubbles:!1,cancelable:!0,composed:!0},{name:"ionScrollEnd",method:"ionScrollEnd",bubbles:!0,cancelable:!0,composed:!0}]}static get listeners(){return[{name:"scroll",method:"onScroll",passive:!0}]}static get style(){return"ion-scroll{left:0;right:0;top:0;bottom:0;position:absolute;z-index:1;display:block;overflow-x:hidden;overflow-y:scroll;-webkit-overflow-scrolling:touch;will-change:scroll-position;contain:size style layout}ion-scroll .focus-input{margin:0;padding:0;position:absolute;width:0;height:0;border:0;background:0 0;opacity:0;-webkit-appearance:none;-moz-appearance:none;appearance:none}ion-scroll.overscroll::after,ion-scroll.overscroll::before{position:absolute;width:1px;height:1px;content:\"\"}ion-scroll.overscroll::before{bottom:-1px}ion-scroll.overscroll::after{top:-1px}ion-scroll>.scroll-inner{min-height:100%}.scroll-md{font-family:Roboto,\"Helvetica Neue\",sans-serif;color:var(--ion-text-md-color,var(--ion-text-color,#000));background-color:var(--ion-background-md-color,var(--ion-background-color,#fff))}.scroll-md hr{background-color:var(--ion-background-md-color-step-50,var(--ion-background-color-step-50,#f2f2f2))}"}static get styleMode(){return"md"}}export{l as IonScroll};