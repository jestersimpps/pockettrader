/*! Built with http://stenciljs.com */
const{h:e}=window.App;import{c as t,a}from"./chunk-fa062d1d.js";import{c as s,a as n,d as i,e as r,f as l,b as o,g as c}from"./chunk-5ac4d949.js";import"./chunk-6061a41c.js";import"./chunk-a7525511.js";class h{constructor(){this.exchanges=[],this.isLoading=!1,this.segment="1"}componentWillLoad(){this.store.mapStateToProps(this,e=>{const{app:{exchanges:t,baseCurrency:a,currencies:s,tickers:n,wallets:i,balances:r}}=e;return{exchanges:t,baseCurrency:a,currencies:s,tickers:n,wallets:i,balances:r}}),this.store.mapDispatchToProps(this,{appSetExchanges:s,appSetBaseCurrency:n,appSetCurrencies:i,appSetTickers:r,appSetTotalBalances:l,appSetWallets:o,appSetBalances:c})}addTotalBalance(e){t.getTotalBalances().then(a=>{if(e&&e>0){let s=Math.round((new Date).getTime());t.setTotalBalances([...a,[s,e]]),this.appSetTotalBalances([...a,[s,e]])}})}refreshBalances(){this.isLoading=!0,t.refreshBalances(this.wallets,this.exchanges).then(e=>{e&&(this.appSetCurrencies(e.conversionrates),this.appSetTickers(e.tickers),this.appSetWallets(e.wallets),this.appSetExchanges(e.exchanges),this.addTotalBalance(e.exchangeTotal+e.walletTotal),this.appSetBalances({overview:e.exchangeTotal+e.walletTotal,exchanges:e.exchangeTotal,wallets:e.walletTotal})),this.isLoading=!1})}render(){return[e("ion-header",null,e("ion-toolbar",{color:"dark"},e("ion-buttons",{slot:"start"},e("ion-button",{"icon-only":!0,href:"/settings",padding:!0},e("ion-icon",{name:"options"}))),e("ion-title",{"text-center":!0},e("ion-badge",{color:"light"},e("app-baseprice",{btcPrice:a.convertToBase(this.balances.wallets,this.baseCurrency),baseCurrency:this.baseCurrency}))),e("ion-buttons",{slot:"end"},e("ion-button",{"icon-only":!0,disabled:this.isLoading,onClick:()=>this.refreshBalances(),padding:!0},e("ion-icon",{name:"refresh",class:this.isLoading?"spin":""}))))),e("ion-content",null,e("ion-refresher",{slot:"fixed",onIonRefresh:()=>this.refreshBalances()},e("ion-refresher-content",null)),e("ion-list",null,this.wallets.filter(e=>e.balance>0).map(t=>e("app-balanceitem",{exchangeId:null,baseCurrency:this.baseCurrency,cryptodata:t}))))]}static get is(){return"app-wallets"}static get properties(){return{balances:{state:!0},baseCurrency:{state:!0},exchanges:{state:!0},isLoading:{state:!0},segment:{state:!0},store:{context:"store"},tickers:{state:!0},wallets:{state:!0}}}static get style(){return""}}export{h as AppWallets};