/*! Built with http://stenciljs.com */
App.loadBundle("tzjzmtah",["exports","./chunk-4c3efb41.js","./chunk-b5724922.js","./chunk-50c69dbd.js","./chunk-468533f7.js"],function(e,r,t,n,i){var o=window.App.h,s=function(){function e(){}return e.prototype.componentWillLoad=function(){var e=this;this.store.mapStateToProps(this,function(e){var r=e.app;return{orders:r.orders,tickers:r.tickers,exchanges:r.exchanges,baseCurrency:r.baseCurrency}}),this.store.mapDispatchToProps(this,{appSetOrders:n.appSetOrders}),this.order=this.orders.find(function(r){return r.orderId===e.orderId})},e.prototype.render=function(){var e=this;return[o("ion-header",null,o("ion-toolbar",{color:"dark"},o("ion-buttons",{slot:"start"},o("ion-back-button",{defaultHref:"/orders"})),o("ion-title",{"text-center":!0},this.order.pair),o("ion-buttons",{slot:"end"},o("ion-button",{"icon-only":!0,disabled:this.isLoading,onClick:function(){return e.reloadOrder()},padding:!0},o("ion-icon",{name:"refresh",class:this.isLoading?"spin":""}))))),o("ion-content",null,o("ion-list",null,o("app-ohlc",{exchangeId:this.order.exchangeId,symbol:this.order.pair,altPrice:this.order.openPrice,curPrice:this.order.last}),o("ion-item",{lines:"none"},o("ion-label",null,"Last/Open Price"),o("ion-label",{"text-right":!0,slot:"end"},o("b",{style:{color:100*this.order.last/this.order.openPrice-100>0?"#10dc60":"#f53d3d"}},100*this.order.last/this.order.openPrice-100>0?"+"+t.numeral(100*this.order.last/this.order.openPrice-100).format("0,0.00")+" %":t.numeral(100*this.order.last/this.order.openPrice-100).format("0,0.00")+" %"))),o("ion-item",{lines:"none"},o("ion-label",null,"Type"),o("ion-label",{"text-right":!0,slot:"end"},this.order.type)),o("ion-item",{lines:"none"},o("ion-label",null,"Exchange"),o("ion-label",{"text-right":!0,slot:"end"},this.order.exchangeId)),o("ion-item",{lines:"none"},o("ion-label",null,"Pair"),o("ion-label",{"text-right":!0,slot:"end"},this.order.pair)),o("ion-item",{lines:"full"},o("ion-label",null,"Status"),o("ion-badge",{color:"dark","text-right":!0,slot:"end"},this.order.status)),o("ion-item",{lines:"none"},o("ion-label",null,"Open Price"),o("ion-label",{"text-right":!0,slot:"end"},this.order.openPrice?t.numeral(this.order.openPrice).format("0,0.00000000"):"-")),o("ion-item",{lines:"none"},o("ion-label",null,"Last Price"),o("ion-label",{"text-right":!0,slot:"end"},this.order.last?t.numeral(this.order.last).format("0,0.00000000"):"-")),o("ion-item",{lines:"none"},o("ion-label",null,"Amount"),o("ion-label",{"text-right":!0,slot:"end"},this.order.amount," ",this.order.base)),o("ion-item",{lines:"full"},o("ion-label",null,"Fee"),o("ion-label",{"text-right":!0,slot:"end"},this.order.fee?t.numeral(this.order.fee).format("0,0.00000000"):"-")),o("ion-item",{lines:"none"},o("ion-label",null,"Open Total"),o("ion-label",{"text-right":!0,slot:"end"},this.order.openPrice?t.numeral(this.order.openPrice*this.order.amount-this.order.fee).format("0,0.00000000"):"-")),o("ion-item",{lines:"none"},o("ion-label",null,"Last Total"),o("ion-label",{"text-right":!0,slot:"end"},this.order.last?t.numeral(this.order.last*this.order.amount-this.order.fee).format("0,0.00000000"):"-")),o("ion-item",{lines:"none"},o("ion-label",null,this.order.status===r.OrderStatus.open&&"Last - Open total",this.order.status===r.OrderStatus.filled&&"Last - Fill total",this.order.status===r.OrderStatus.closed&&"Last - Fill total",this.order.status===r.OrderStatus.cancelled&&"Last/Open total"),o("ion-label",{"text-right":!0,slot:"end"},this.order.last?t.numeral(this.order.last*this.order.amount-this.order.openPrice*this.order.amount-2*this.order.fee).format("0,0.00000000"):"-")),this.order.status===r.OrderStatus.open&&o("ion-button",{color:"danger",expand:"full",disabled:this.isLoading,onClick:function(){return e.cancelOrder()}},this.isLoading&&o("ion-icon",{name:"refresh",class:"spin","margin-right":!0}),"Cancel Order"),o("ion-nav-pop",null,o("ion-button",{color:"danger",expand:"full",disabled:this.isLoading,onClick:function(){return e.deleteOrder()}},this.isLoading&&o("ion-icon",{name:"refresh",class:"spin","margin-right":!0}),"Delete Order"))))]},e.prototype.cancelOrder=function(){var e=this;if(window.confirm("Are you sure you want to cancel this order?")){this.isLoading=!0;var t=this.exchanges.find(function(r){return r.id===e.order.exchangeId});r.TRADESERVICE.cancelOrder(t,this.order.orderId,this.order.pair).then(function(){window.alert("Order cancelled"),e.order.status=r.OrderStatus.cancelled,e.appSetOrders(e.orders),e.isLoading=!1}).catch(function(r){e.isLoading=!1,window.alert("Something went wrong while canceling the order: "+r.message)})}},e.prototype.deleteOrder=function(){var e=this;this.isLoading=!0;var r=this.orders.filter(function(r){return r.orderId!==e.orderId});this.appSetOrders(r),this.isLoading=!1},e.prototype.reloadOrder=function(){var e=this;this.isLoading=!0;var t=this.exchanges.find(function(r){return r.id===e.order.exchangeId}),n=[];r.TICKERSERVICE.getTickers(this.order.exchangeId).then(function(i){return n=i.data,r.TRADESERVICE.getOrder(t,e.order.orderId,e.order.pair).then(function(t){var i=t.data,o=e.orders.find(function(e){return e.orderId===i.id}),s=n.find(function(e){return e.symbol===o.pair});o.filled=i.filled,o.remaining=i.remaining,o.last=s.last,0==+i.remaining&&(o.status=r.OrderStatus.filled),e.isLoading=!1,e.appSetOrders(e.orders)}).catch(function(r){window.alert("Something went wrong while fetching the orderbook: "+r.message),e.isLoading=!1})}).catch(function(r){window.alert("Error fetching ticker data: "+r.message),e.isLoading=!1})},Object.defineProperty(e,"is",{get:function(){return"app-order"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"properties",{get:function(){return{baseCurrency:{state:!0},exchanges:{state:!0},isLoading:{state:!0},order:{state:!0},orderId:{type:String,attr:"order-id"},orders:{state:!0},store:{context:"store"},tickers:{state:!0}}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"style",{get:function(){return""},enumerable:!0,configurable:!0}),e}();e.AppOrder=s,Object.defineProperty(e,"__esModule",{value:!0})});